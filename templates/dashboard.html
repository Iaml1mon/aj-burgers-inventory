{% extends 'base.html' %}

{% block content %}
<h2 class="mb-4">Inventory Dashboard</h2>
{% if grouped_items %}
    {% for category, data in grouped_items.items() %}
    <div class="card mb-4 shadow-sm">
        <div class="card-header d-flex align-items-center" style="background-color: var(--primary-color, #343a40);">
            <h5 class="mb-0 text-white">
                <i class="bi bi-box-seam me-2"></i>{{ category }}
            </h5>
        </div>
        <div class="card-body">
            <div class="row gy-4">
                <div class="col-md-4">
                    <h6 class="text-danger"><i class="bi bi-exclamation-circle me-1"></i>Needs to Buy</h6>
                    {% if data.needs %}
                        <ul class="list-group list-group-flush">
                            {% for item in data.needs %}
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    {{ item['item_name'] }}
                                    <span class="badge bg-danger rounded-pill">{{ item['quantity'] }}</span>
                                </li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <p class="text-muted small">Nothing to buy.</p>
                    {% endif %}
                </div>
                <div class="col-md-4">
                    <h6 class="text-warning"><i class="bi bi-exclamation-triangle me-1"></i>Low Stock</h6>
                    {% if data.low %}
                        <ul class="list-group list-group-flush">
                            {% for item in data.low %}
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    {{ item['item_name'] }}
                                    <span class="badge bg-warning text-dark rounded-pill">{{ item['quantity'] }}</span>
                                </li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <p class="text-muted small">All items above threshold.</p>
                    {% endif %}
                </div>
                <div class="col-md-4">
                    <h6 class="text-success"><i class="bi bi-check-circle me-1"></i>All Good</h6>
                    {% if data.good %}
                        <ul class="list-group list-group-flush">
                            {% for item in data.good %}
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    {{ item['item_name'] }}
                                    <span class="badge bg-success rounded-pill">{{ item['quantity'] }}</span>
                                </li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <p class="text-muted small">No items meet or exceed threshold.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
{% else %}
    <p class="text-muted">No inventory data available.</p>
{% endif %}
{% endblock %}
